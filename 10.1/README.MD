# Домашнее задание к занятию "11.01 Введение в микросервисы"

## Задача 1: Интернет Магазин

Руководство крупного интернет магазина у которого постоянно растёт пользовательская база и количество заказов рассматривает возможность переделки своей внутренней ИТ системы на основе микросервисов.  
Вас пригласили в качестве консультанта для оценки целесообразности перехода на микросервисную архитектуру.  
Опишите какие выгоды может получить компания от перехода на микросервисную архитектуру и какие проблемы необходимо будет решить в первую очередь.

---

1. Ознакомившись с задачей, нужно выработать схему, по которой будет строиться работа. Для этого, нужно понимать, какие задачи должен решать продукт в виде интернет магазина, какие сервисы он должен предоставлять клиентам, что бизнес ожидает получить (бенефиты) и какие ресурсы бизнес готов потратить. Какие мысли приходят в голову при анализе:

- указывается, что предвидится рост клиентской базы, что весьма вероятно приведёт к росту нагрузки на продукт.
- указывается, что идёт рост клиентских заказов, что требует чёткого и корректного исполнения всех процессов внутри системы, чтобы не терять заказы, исключить или минимизировать сбои и т.д.
- такого рода продукты, как интернет магазин часто предполагают проведение различных маркетинговых предприятий, включая но не ограничиваясь: рассылки клиентам по почте, в виде смс, реклама в виде банеров и так далее. Такие мероприятия могут привести и приводят к кратковременной лавинообразной нагрузке на продукт.
- среди прочего, тут видится такая ситуация, что в зависимости от того, как будут продвигаться дела с продуктом, возможно он потребует подключения неких дополнительных сервисов для удовлетворения нужд клиентов.  
В совокупности, тут однозначно можно рекомендовать внедрение микросервисной архитектуры.

### Выгоды:

1. Ускорение разработки и выкладки релизов.

> Речь о том, что разбиение единого сервиса магазина на множество компонентов, позволяет ускорить внедрение важных и полезных для клиентов изменений, в целом не оглядываясь на другие компоненты системы. Например, в случае внедрения изменений в мобильное приложение (связанное с сайтом), не обязательно дожидаться каких-то изменений на сайте, а достаточно сохранить приемственность по API.

2. Независимая разработка нескольких компонентов системы в течение разных промежутков времени, без привязок друг другу, причём различными командами.

> Интернет магазин это живая система, которая двигается в ногу с запросами клиентов, бизнеса и времени. Следовательно, весьма желательно иметь возможность оперативно внедрять свежие идеи, выполнять маркетинговые мероприятие, стартуя для этого на некоторое время некий сервис. Команды разработки модулей выполняют работы независимо друг от друга.

3. Отказоустойчивость системы.
> В случае модульной микросервисной сущности продукта, система имеет некий запас прочности, главное правильно выбрать разбиение на сервисы. Например, известно, что рост нагрузки может быть обусловлен: сезоны распродаж, праздники, маркетинговые мероприятия, рост клиентской базы в принципе. Таким образом, сайт магазина должен быть спроектирован так, что отдельные части (фронтенд, бекенд, СУБД) должны иметь возможность масштабирования, причём быстро и в любой момент времени, а желательно и автоматически. Всему этому удовлетворяет микросервисный подход.

4. Использование разных технологий при построении микросервисов.
> Это даёт возможности вести разработку разных частей магазина при помощи различных инструментов, языков программирования, модулей, фреймворков, баз данных и так далее. Оперативная смена в любом модуле любой парадигмы его построения (фреймворк, СУБД, язык программирования, команда разработки) вероятно не повлияет на другие модули. На момент разработки и тестирования, ничто не мешает держать запущенным любую версию любого модуля системы, а затем оперативно задеплоить его замену.

### Недостатки

Каждая сложная система может приносить выгоды в своём обслуживании лишь до некоторого предела. Начиная с некоторой степени сложности, мы сталкиваемся с такими проблемами как: сравнительная сложность поддержки, сложность разработки, мониторинга, обслуживания и так далее.

1. Проблемы для разработчиков.

> Сложная система требует интересных и нетривиальных подходов. Многие вещи и технологии находятся на некоей вершине технологического стека и требуют серьёзной квалификации разработчиков. Требуются знания многих современных фреймворков, типов СУБД, брокеров сообщений, протоколов взаимодействия модуль-модуль в рамках соседних микросервисов. Помимо этого, для ускорения разработки, тестирования и развёртывания понадобится автоматизация в лице систем конфигурирования, CI/CD и прочего.

2. Проблемы для инфраструктуры.

> Модульная система с потенциалом роста нагрузок в любой момент времени требует серьёзную инфраструктуру. Возможно потребуется или польностью облачное решение или комбинированное на базе собственной и облачной инфраструктуры. Поддержка этого хозяйства требует некоторых усилиий, денежных средств и высококвалифицированных кадров. Сложность в настройке такой системы также вполне очевидна и требует комплексных знаний по множеству разных технических стеков и решений (например, тут речь о работе с Terraform, docker, AWS и так далее)

3. Проблемы мониторинга, сбора логов, ведения документации.

> Усложнение системы влечёт за собой потребности в хорошей системе мониторинга, сбора логов, метрик и оперативной реакции на инциденты. Безусловно, что такие потребности влекут за собой также, как в прочих пунктах технически квалифицированный персонал, привлечение денежных средств для решения задач этого пункта (возможно увеличение инфраструктуры на обслуживающие сервисы в лице мониторинга и сбора журналов.) По всем этим системам нужна хорошая структурированная документация: архитектура, логическая карта, функциональная карта, реакции на инциденты (после проведённых ретроспектив), типовые действия персонала в системе (уровень пользователя и уровень администратора).

В целом, потребности этого проекта, очевидно предусматривают переход на систему оркестрации Kubernetes.